trigger:
- master

name: Deploy Alerts using bicep

variables:
   azureServiceConnection: 'SC-MPNSeb'
  resourceGroupName: 'supervisionbiceppoc'
  templateFile: 'allAlerts.bicep'
  parametersFile: 'AlertsDefinitions\metricsAlerts.json'
pool:
  name: Default

steps:
- task: AzureCLI@2
  inputs:
    azureSubscription: $(azureServiceConnection)
    scriptType: bash
    scriptLocation: inlineScript
    inlineScript: |
      az --version
      az deployment group create --resource-group $(resourceGroupName) --template-file $(templateFile) --parameters